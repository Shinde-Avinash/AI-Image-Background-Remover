<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Background Remover</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar for better aesthetic */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background: #4f46e5;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937;
        }

        /* Set Inter as default font */
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Utility to hide the default file input text */
        .custom-file-input::-webkit-file-upload-button {
            visibility: hidden;
        }
        .custom-file-input::before {
            content: 'Select an image (PNG, JPG, WEBP)';
            display: inline-block;
            background: #4f46e5;
            color: white;
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            outline: none;
            white-space: nowrap;
            cursor: pointer;
            font-weight: 600;
            text-shadow: 1px 1px #00000030;
        }
        .custom-file-input:hover::before {
            background: #4338ca;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-blue': '#4f46e5',
                        'dark-bg': '#111827',
                        'card-bg': '#1f2937',
                    }
                }
            }
        }
    </script>
</head>

<!-- Body uses a deep dark background -->
<body class="bg-dark-bg min-h-screen text-white p-4 sm:p-8">

    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-white tracking-tight mb-2">
                <span class="text-primary-blue">AI</span> Background Remover
            </h1>
            <p class="text-gray-400 text-lg">Remove backgrounds instantly and flawlessly.</p>
        </header>

        <!-- Main Upload Card -->
        <div class="bg-card-bg p-6 sm:p-8 rounded-xl shadow-2xl border border-gray-700">
            <h2 class="text-2xl font-semibold mb-6 text-center text-white">Upload & Process</h2>
            
            <!-- Error Message Display -->
            {% if error_message %}
            <div class="bg-red-500/20 text-red-300 border border-red-500 rounded-lg p-3 mb-4 font-medium text-center">
                {{ error_message }}
            </div>
            {% endif %}

            <form action='/remback' method="POST" enctype="multipart/form-data" class="space-y-4">
                <!-- File Input Area -->
                <div class="flex flex-col items-center justify-center border-2 border-dashed border-gray-600 rounded-lg p-8 hover:border-primary-blue transition duration-300">
                    <label for="file-upload" class="cursor-pointer">
                        <input id="file-upload" name='file' type="file" required 
                                class="custom-file-input opacity-0 absolute w-1 h-1" 
                                onchange="document.getElementById('file-name').textContent = this.files[0].name"
                                accept=".png, .jpg, .jpeg, .webp">
                        
                        <div class="text-center">
                            <!-- Custom button styled via CSS ::before -->
                            <button type="button" onclick="document.getElementById('file-upload').click()" 
                                    class="px-6 py-3 bg-primary-blue hover:bg-indigo-700 text-white font-bold rounded-full shadow-lg transition duration-200 focus:outline-none focus:ring-4 focus:ring-primary-blue/50">
                                Select Image
                            </button>

                            <p id="file-name" class="mt-4 text-gray-400">
                                No file chosen. (Max 5MB recommended)
                            </p>
                        </div>
                    </label>
                </div>

                <!-- Submit Button -->
                <div class="pt-4">
                    <button type='submit' 
                            class='w-full px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-bold text-lg rounded-xl shadow-lg transition duration-200 transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-green-500/50'>
                        Remove Background Now
                    </button>
                </div>
            </form>
        </div>

        <!-- Results Display Section -->
        {% if rembg_img_name %}
        <div class="mt-12">
            <h2 class="text-3xl font-bold text-center mb-6 text-white">Results</h2>
            
            <div class="grid md:grid-cols-2 gap-8">
                
                <!-- Original Image Card -->
                <div class="bg-card-bg p-5 rounded-xl shadow-xl border border-gray-700">
                    <h3 class="text-xl font-semibold mb-4 text-center text-gray-300">Original Image</h3>
                    <div class="h-64 flex items-center justify-center bg-gray-900 rounded-lg overflow-hidden">
                        <img src='../static/uploads/{{ org_img_name }}' 
                            alt="Original Image"
                            class="max-h-full max-w-full object-contain rounded-lg shadow-md transition duration-300 hover:scale-[1.05]"
                            onerror="this.onerror=null; this.src='https://placehold.co/400x400/374151/ffffff?text=Image+Load+Failed';"
                        >
                    </div>
                </div>

                <!-- Processed Image Card -->
                <div class="bg-card-bg p-5 rounded-xl shadow-xl border border-gray-700">
                    <h3 class="text-xl font-semibold mb-4 text-center text-primary-blue">Background Removed</h3>
                    <div class="h-64 flex items-center justify-center bg-gray-900 rounded-lg overflow-hidden">
                        <img src='../static/uploads/{{ rembg_img_name }}' 
                            alt="Processed Image"
                            class="max-h-full max-w-full object-contain rounded-lg shadow-md transition duration-300 hover:scale-[1.05]"
                            onerror="this.onerror=null; this.src='https://placehold.co/400x400/374151/ffffff?text=Image+Load+Failed';"
                        >
                    </div>
                    
                    <!-- Download Button -->
                    <div class="mt-6 text-center">
                        <a href="../static/uploads/{{ rembg_img_name }}" download="{{ rembg_img_name }}"
                            class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-full shadow-sm text-white bg-primary-blue hover:bg-indigo-700 transition duration-150 transform hover:scale-[1.02] focus:outline-none focus:ring-4 focus:ring-primary-blue/50">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                            Download PNG
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

    </div>

</body>
</html>